the source code for the moo package, you can edit the source and view how I implemented all the commands.

